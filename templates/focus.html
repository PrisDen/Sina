{% extends "base.html" %}

{% block title %}Focus Sessions - Sina{% endblock %}

{% block content %}
<div class="px-4 sm:px-6 lg:px-8">
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900">
            <i class="fas fa-clock mr-3 text-green-600"></i>
            Focus Sessions
        </h1>
        <p class="mt-2 text-gray-600">Deep work sessions to build unshakeable discipline.</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
        <div class="lg:col-span-2">
            <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">Pomodoro Timer</h2>
                <div class="text-8xl font-mono font-bold text-gray-900 mb-4" id="main-timer-display">25:00</div>
                <div class="text-lg text-gray-600" id="timer-status">Ready to start</div>
                
                <div class="flex justify-center space-x-4 mt-6">
                    <button id="start-main-timer" class="bg-green-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-green-700">
                        <i class="fas fa-play mr-2"></i>Start
                    </button>
                    <button id="pause-main-timer" class="bg-yellow-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-yellow-700">
                        <i class="fas fa-pause mr-2"></i>Pause
                    </button>
                    <button id="reset-main-timer" class="bg-red-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-red-700">
                        <i class="fas fa-stop mr-2"></i>Reset
                    </button>
                </div>
            </div>
        </div>
        
        <div class="space-y-6">
            <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Today's Progress</h3>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Sessions</span>
                        <span class="font-medium">{{ today_sessions }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Focus Time</span>
                        <span class="font-medium">{{ today_minutes }} min</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% block scripts %}
<script>
    class FocusTimer {
        constructor() {
            this.duration = 25 * 60;
            this.timeLeft = this.duration;
            this.isRunning = false;
            this.interval = null;
            this.display = document.getElementById('main-timer-display');
            this.status = document.getElementById('timer-status');
            this.setupEventListeners();
        }
        
        setupEventListeners() {
            document.getElementById('start-main-timer').addEventListener('click', () => this.start());
            document.getElementById('pause-main-timer').addEventListener('click', () => this.pause());
            document.getElementById('reset-main-timer').addEventListener('click', () => this.reset());
        }
        
        start() {
            if (!this.isRunning) {
                this.isRunning = true;
                this.status.textContent = 'Focus time - stay concentrated!';
                this.interval = setInterval(() => {
                    this.timeLeft--;
                    this.updateDisplay();
                    if (this.timeLeft <= 0) {
                        this.complete();
                    }
                }, 1000);
            }
        }
        
        pause() {
            if (this.isRunning) {
                clearInterval(this.interval);
                this.isRunning = false;
                this.status.textContent = 'Paused';
            }
        }
        
        reset() {
            clearInterval(this.interval);
            this.isRunning = false;
            this.timeLeft = this.duration;
            this.status.textContent = 'Ready to start';
            this.updateDisplay();
        }
        
        complete() {
            clearInterval(this.interval);
            this.isRunning = false;
            this.status.textContent = 'Session complete!';
            alert('Focus session complete! Time for a break.');
            this.reset();
        }
        
        updateDisplay() {
            const minutes = Math.floor(this.timeLeft / 60);
            const seconds = this.timeLeft % 60;
            this.display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        window.focusTimer = new FocusTimer();
    });
</script>
{% endblock %}
{% endblock %} 